<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Execution of a single function call on the Slurm cluster — slurm_call • rslurm</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/darkly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  
<meta property="og:title" content="Execution of a single function call on the Slurm cluster — slurm_call" />

<meta property="og:description" content="Use slurm_call to perform a single function evaluation a the Slurm 
cluster." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-standard navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rslurm</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/rslurm.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/SESYNC-ci/rslurm">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Execution of a single function call on the Slurm cluster</h1>
    <small class="dont-index">Source: <a href='https://github.com/SESYNC-ci/rslurm/blob/master/R/slurm_call.R'><code>R/slurm_call.R</code></a></small>
    <div class="hidden name"><code>slurm_call.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Use <code>slurm_call</code> to perform a single function evaluation a the Slurm 
cluster.</p>
    
    </div>

    <pre class="usage"><span class='fu'>slurm_call</span>(<span class='no'>f</span>, <span class='no'>params</span>, <span class='kw'>jobname</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>add_objects</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>pkgs</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rev.html'>rev</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/zpackages.html'>.packages</a></span>()), <span class='kw'>libPaths</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>rscript_path</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>r_template</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>sh_template</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>slurm_options</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(),
  <span class='kw'>submit</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>f</th>
      <td><p>Any R function.</p></td>
    </tr>
    <tr>
      <th>params</th>
      <td><p>A named list of parameters to pass to <code>f</code>.</p></td>
    </tr>
    <tr>
      <th>jobname</th>
      <td><p>The name of the Slurm job; if <code>NA</code>, it is assigned a 
random name of the form "slr####".</p></td>
    </tr>
    <tr>
      <th>add_objects</th>
      <td><p>A character vector containing the name of R objects to be 
saved in a .RData file and loaded on each cluster node prior to calling 
<code>f</code>.</p></td>
    </tr>
    <tr>
      <th>pkgs</th>
      <td><p>A character vector containing the names of packages that must be
loaded on each cluster node. By default, it includes all packages loaded by
the user when <code>slurm_call</code> is called.</p></td>
    </tr>
    <tr>
      <th>libPaths</th>
      <td><p>A character vector describing the location of additional R
library trees to search through, or NULL. The default value of NULL
corresponds to libraries returned by <code><a href='https://rdrr.io/r/base/libPaths.html'>.libPaths()</a></code> on a cluster node.
Non-existent library trees are silently ignored.</p></td>
    </tr>
    <tr>
      <th>rscript_path</th>
      <td><p>The location of the Rscript command. If not specified, 
defaults to the location of Rscript within the R installation being run.</p></td>
    </tr>
    <tr>
      <th>r_template</th>
      <td><p>The path to the template file for the R script run on each node. 
If NULL, uses the default template "rslurm/templates/slurm_run_single_R.txt".</p></td>
    </tr>
    <tr>
      <th>sh_template</th>
      <td><p>The path to the template file for the sbatch submission script. 
If NULL, uses the default template "rslurm/templates/submit_single_sh.txt".</p></td>
    </tr>
    <tr>
      <th>slurm_options</th>
      <td><p>A named list of options recognized by <code>sbatch</code>; see
Details below for more information.</p></td>
    </tr>
    <tr>
      <th>submit</th>
      <td><p>Whether or not to submit the job to the cluster with 
<code>sbatch</code>; see Details below for more information.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code>slurm_job</code> object containing the <code>jobname</code> and the number
  of <code>nodes</code> effectively used.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function creates a temporary folder ("_rslurm_[jobname]") in the current
directory, holding .RData and .RDS data files, the R script to run and the
Bash submission script generated for the Slurm job.</p>
<p>The names of any other R objects (besides <code>params</code>) that <code>f</code> needs 
to access should be listed in the <code>add_objects</code> argument.</p>
<p>Use <code>slurm_options</code> to set any option recognized by <code>sbatch</code>, e.g. 
<code>slurm_options = list(time = "1:00:00", share = TRUE)</code>. See
<a href='http://slurm.schedmd.com/sbatch.html'>http://slurm.schedmd.com/sbatch.html</a> for details on possible options. 
Note that full names must be used (e.g. "time" rather than "t") and that
flags (such as "share") must be specified as TRUE. The "job-name", "ntasks" 
and "output" options are already determined by <code>slurm_call</code> and should 
not be manually set.</p>
<p>When processing the computation job, the Slurm cluster will output two files 
in the temporary folder: one with the return value of the function 
("results_0.RDS") and one containing any console or error output produced by
R ("slurm_[node_id].out").</p>
<p>If <code>submit = TRUE</code>, the job is sent to the cluster and a confirmation 
message (or error) is output to the console. If <code>submit = FALSE</code>, a
message indicates the location of the saved data and script files; the job
can be submitted manually by running the shell command <code>sbatch
submit.sh</code> from that directory.</p>
<p>After sending the job to the Slurm cluster, <code>slurm_call</code> returns a 
<code>slurm_job</code> object which can be used to cancel the job, get the job 
status or output, and delete the temporary files associated with it. See the
description of the related functions for more details.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='slurm_apply.html'>slurm_apply</a></code> to parallelize a function over a parameter
  set.</p>
<p><code><a href='cancel_slurm.html'>cancel_slurm</a></code>, <code><a href='cleanup_files.html'>cleanup_files</a></code>, 
  <code><a href='get_slurm_out.html'>get_slurm_out</a></code> and <code><a href='get_job_status.html'>get_job_status</a></code> which use
  the output of this function.</p></div>
    

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
          </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Philippe Marchand, Ian Carroll, Quentin Read.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


